<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">

</head>
<body>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">ENV_SAMPLE = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">App mode</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">APP_MODE=offline <span class="Apple-converted-space">            </span># offline | online</span></p>
<p class="p1"><span class="s1">PORT=7860</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Agent models &amp; paths</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">AGENT_MODEL=gguf/llama-3.1-8b-q4_0.gguf</span></p>
<p class="p1"><span class="s1">EMBED_MODEL=bge-small</span></p>
<p class="p1"><span class="s1">LLM_THREADS=0</span></p>
<p class="p1"><span class="s1">LLM_CTX=4096</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">RAG store</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">MEMORY_DIR=agent/memory</span></p>
<p class="p1"><span class="s1">SKILLS_DIR=agent/skills</span></p>
<p class="p1"><span class="s1">DOCS_DIR=docs</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Cloud (optional)</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">CLOUD_URL=http://127.0.0.1:8008</span></p>
<p class="p1"><span class="s1">CLOUD_API_KEY=changeme</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">GitHub auto-sync (used by scripts/update_sync.py)</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">GIT_BRANCH=main</span></p>
<p class="p1"><span class="s1">GIT_COMMIT_MESSAGE=Supersonic: auto-sync</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">GITIGNORE = “””</span></p>
<p class="p1"><span class="s1">.venv/</span></p>
<p class="p1"><span class="s1">gguf/</span></p>
<p class="p1"><span class="s1">node_modules/</span></p>
<p class="p1"><span class="s1">dist/</span></p>
<p class="p1"><span class="s1">docs/site/</span></p>
<p class="p1"><span class="s3">pycache</span><span class="s1">/</span></p>
<p class="p1"><span class="s1">*.pyc</span></p>
<p class="p1"><span class="s1">src-tauri/target/</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">—————————– scripts/ ––––––––––––––––</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">BENCH_LLM = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Simple tokens/sec sanity. Measures a tiny prompt several times.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import os, time</span></p>
<p class="p1"><span class="s1">from pathlib import Path</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">TEST_PROMPT = “Summarize the steps to install an Android head unit with DSP and retain steering wheel controls.”</span></p>
<p class="p1"><span class="s1">MODEL = os.getenv(“AGENT_MODEL”, “gguf/llama-3.1-8b-q4_0.gguf”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def bench():</span></p>
<p class="p1"><span class="s1">try:</span></p>
<p class="p1"><span class="s1">from llama_cpp import Llama</span></p>
<p class="p1"><span class="s1">except Exception as e:</span></p>
<p class="p1"><span class="s1">print(“✖ llama-cpp-python not installed.”, e); return</span></p>
<p class="p1"><span class="s1">mp = Path(MODEL)</span></p>
<p class="p1"><span class="s1">if not mp.exists():</span></p>
<p class="p1"><span class="s1">print(f”✖ Model not found at {mp}. Set AGENT_MODEL or download a GGUF.”)</span></p>
<p class="p1"><span class="s1">return</span></p>
<p class="p1"><span class="s1">llm = Llama(model_path=str(mp), n_ctx=int(os.getenv(“LLM_CTX”,“4096”)), n_threads=int(os.getenv(“LLM_THREADS”,“0”)) or None, verbose=False)</span></p>
<p class="p1"><span class="s1"># warmup</span></p>
<p class="p1"><span class="s1">llm.create_chat_completion(messages=[{“role”:“user”,“content”:“hello”}], max_tokens=64)</span></p>
<p class="p1"><span class="s1">runs, total_tok, total_sec = 3, 0, 0.0</span></p>
<p class="p1"><span class="s1">for i in range(runs):</span></p>
<p class="p1"><span class="s1">t0 = time.time()</span></p>
<p class="p1"><span class="s1">out = llm.create_chat_completion(messages=[{“role”:“user”,“content”:TEST_PROMPT}], max_tokens=128, temperature=0.7)</span></p>
<p class="p1"><span class="s1">t1 = time.time()</span></p>
<p class="p1"><span class="s1">gen = out.get(“usage”,{}).get(“completion_tokens”, 128)</span></p>
<p class="p1"><span class="s1">total_tok += gen</span></p>
<p class="p1"><span class="s1">total_sec += (t1 - t0)</span></p>
<p class="p1"><span class="s1">print(f”Run {i+1}: ~{gen} tokens in {t1-t0:.2f}s → {gen/max(1e-6,t1-t0):.1f} tok/s”)</span></p>
<p class="p1"><span class="s1">print(f”\nAvg: ~{total_tok/runs:.0f} tokens per run, {total_tok/max(1e-6,total_sec):.1f} tok/s overall.”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">if </span><span class="s3">name</span><span class="s1"> == ‘</span><span class="s3">main</span><span class="s1">’:</span></p>
<p class="p1"><span class="s1">bench()</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">DIAGNOSTIC = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Checks Python, Node, Cargo, mkdocs, key files, model path.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import os, shutil, platform</span></p>
<p class="p1"><span class="s1">from pathlib import Path</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def which(x): return shutil.which(x) or “not found”</span></p>
<p class="p1"><span class="s1">def exists(p): return “OK” if Path(p).exists() else “missing”</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">items = {</span></p>
<p class="p1"><span class="s1">“python”: which(“python”),</span></p>
<p class="p1"><span class="s1">“node”: which(“node”),</span></p>
<p class="p1"><span class="s1">“npm”: which(“npm”),</span></p>
<p class="p1"><span class="s1">“cargo”: which(“cargo”),</span></p>
<p class="p1"><span class="s1">“mkdocs”: which(“mkdocs”),</span></p>
<p class="p1"><span class="s1">“gguf_model(AGENT_MODEL)”: os.getenv(“AGENT_MODEL”,“gguf/llama-3.1-8b-q4_0.gguf”)</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">print(“System:”, platform.platform())</span></p>
<p class="p1"><span class="s1">for k,v in items.items(): print(f”{k:24} {v}”)</span></p>
<p class="p1"><span class="s1">print(”\nKey paths:”)</span></p>
<p class="p1"><span class="s1">for p in [“desktop/webui/app.py”,“agent/main_llm.py”,“src-tauri/tauri.conf.json”]:</span></p>
<p class="p1"><span class="s1">print(f”{p:32} {exists(p)}”)</span></p>
<p class="p1"><span class="s1">print(”\n.env sample ready? “, “OK” if Path(’.env.sample’).exists() else “missing”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">UPDATE_SYNC = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Safe helper: add/commit/push current branch (uses env for branch &amp; message).</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import os, subprocess, sys</span></p>
<p class="p1"><span class="s1">BRANCH = os.getenv(“GIT_BRANCH”,“main”)</span></p>
<p class="p1"><span class="s1">MSG = os.getenv(“GIT_COMMIT_MESSAGE”,“Supersonic: auto-sync”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def run(cmd):</span></p>
<p class="p1"><span class="s1">print(”&gt;”, “ “.join(cmd))</span></p>
<p class="p1"><span class="s1">return subprocess.run(cmd, check=False).returncode</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">if </span><span class="s3">name</span><span class="s1"> == “</span><span class="s3">main</span><span class="s1">”:</span></p>
<p class="p1"><span class="s1">run([“git”,“add”,”-A”])</span></p>
<p class="p1"><span class="s1">run([“git”,“commit”,”-m”, MSG])</span></p>
<p class="p1"><span class="s1">rc = run([“git”,“push”,“origin”, BRANCH])</span></p>
<p class="p1"><span class="s1">if rc == 0: print(“✅ pushed.”)</span></p>
<p class="p1"><span class="s1">else: print(“⚠️ push may have failed (check auth/branch).”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">AUTO_INGEST = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Recursively ingests .md/.txt into the agent’s RAG via /api/ingest</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import os, requests</span></p>
<p class="p1"><span class="s1">PORT = int(os.getenv(“PORT”,“7860”))</span></p>
<p class="p1"><span class="s1">try:</span></p>
<p class="p1"><span class="s1">r = requests.post(f”http://127.0.0.1:{PORT}/api/ingest”, timeout=20)</span></p>
<p class="p1"><span class="s1">print(“Ingest:”, r.json())</span></p>
<p class="p1"><span class="s1">except Exception as e:</span></p>
<p class="p1"><span class="s1">print(“Ingest error:”, e)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">OPTIMIZE_LLM = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Reads bench_llm output heuristically and suggests thread/ctx tweaks.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">(Lightweight heuristic; you can edit manually in .env)</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import os</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">threads = int(os.getenv(“LLM_THREADS”,“0”))</span></p>
<p class="p1"><span class="s1">ctx = int(os.getenv(“LLM_CTX”,“4096”))</span></p>
<p class="p1"><span class="s1">suggest_threads = max(4, threads or os.cpu_count()//2)</span></p>
<p class="p1"><span class="s1">suggest_ctx = ctx if ctx &lt;= 4096 else 4096</span></p>
<p class="p1"><span class="s1">print(“Current:”, {“threads”:threads, “ctx”:ctx})</span></p>
<p class="p1"><span class="s1">print(“Suggested:”, {“threads”:suggest_threads, “ctx”:suggest_ctx})</span></p>
<p class="p1"><span class="s1">print(“→ Update .env (LLM_THREADS, LLM_CTX) accordingly and re-run bench.”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">DEPLOY_TAURI = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Prints the exact commands to build the Tauri desktop wrapper.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">print(“Commands to run:”)</span></p>
<p class="p1"><span class="s1">print(”<span class="Apple-converted-space">  </span>npm i”)</span></p>
<p class="p1"><span class="s1">print(”<span class="Apple-converted-space">  </span>npm run tauri:dev”)</span></p>
<p class="p1"><span class="s1">print(”<span class="Apple-converted-space">  </span>npm run tauri:build”)</span></p>
<p class="p1"><span class="s1">print(“Bundle will appear in src-tauri/target/release/bundle/”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">TTS_FALLBACK = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Minimal TTS fallback using pyttsx3 (offline). Optional.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import sys</span></p>
<p class="p1"><span class="s1">try:</span></p>
<p class="p1"><span class="s1">import pyttsx3</span></p>
<p class="p1"><span class="s1">except Exception:</span></p>
<p class="p1"><span class="s1">print(“pyttsx3 not installed. pip install pyttsx3”); sys.exit(0)</span></p>
<p class="p1"><span class="s1">engine = pyttsx3.init()</span></p>
<p class="p1"><span class="s1">msg = “Supersonic Assistant is ready.”</span></p>
<p class="p1"><span class="s1">if len(sys.argv) &gt; 1: msg = “ “.join(sys.argv[1:])</span></p>
<p class="p1"><span class="s1">engine.say(msg)</span></p>
<p class="p1"><span class="s1">engine.runAndWait()</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">—————————– agent/ add-ons –––––––––––––</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">AUTO_LEARN = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">agent/auto_learn.py</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Very light “learning”: appends your queries into a journal for later embedding.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">from pathlib import Path</span></p>
<p class="p1"><span class="s1">import datetime</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">JOURNAL = Path(“agent/memory/journal.txt”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def record_query(q: str):</span></p>
<p class="p1"><span class="s1">JOURNAL.parent.mkdir(parents=True, exist_ok=True)</span></p>
<p class="p1"><span class="s1">with open(JOURNAL, “a”, encoding=“utf-8”) as f:</span></p>
<p class="p1"><span class="s1">f.write(f”[{datetime.datetime.utcnow().isoformat()}Z] {q}\n”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">MEM_MAINT = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">agent/memory_maintenance.py</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Placeholder: hooks for deduplicating embeddings / trimming old entries.</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def compact():</span></p>
<p class="p1"><span class="s1">print(“Memory maintenance: (stub) run periodic compaction of RAG store.”)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">AUTO_SKILLS = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">agent/auto_expand_skills.py</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Watches skills dir (manually triggered here; add a watcher later if desired)</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">from pathlib import Path</span></p>
<p class="p1"><span class="s1">import yaml</span></p>
<p class="p1"><span class="s1">def list_skills(skills_dir=“agent/skills”):</span></p>
<p class="p1"><span class="s1">out=[]</span></p>
<p class="p1"><span class="s1">for p in Path(skills_dir).glob(”*.yml”):</span></p>
<p class="p1"><span class="s1">try:</span></p>
<p class="p1"><span class="s1">out.append({ “file”: p.name, **(yaml.safe_load(p.read_text()) or {}) })</span></p>
<p class="p1"><span class="s1">except Exception:</span></p>
<p class="p1"><span class="s1">out.append({ “file”: p.name, “error”: “parse failed” })</span></p>
<p class="p1"><span class="s1">return out</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">SENTINEL = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">agent/agent_sentinel.py</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">Naive watchdog: placeholder for your process supervision strategy</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def ping():</span></p>
<p class="p1"><span class="s1">return {“status”:“ok”,“note”:“replace with real process checks”}</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">—————————– cloud stub ——————————</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">CLOUD_REQ = “fastapi==0.115.5\nuvicorn==0.32.0\npydantic==2.9.2\npython-dotenv==1.0.1\n”</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">CLOUD_MAIN = “””</span></p>
<p class="p1"><span class="s1">from fastapi import FastAPI, Header, HTTPException</span></p>
<p class="p1"><span class="s1">from pydantic import BaseModel</span></p>
<p class="p1"><span class="s1">import os</span></p>
<p class="p1"><span class="s1">from dotenv import load_dotenv</span></p>
<p class="p1"><span class="s1">load_dotenv()</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">API_KEY = os.getenv(“CLOUD_API_KEY”,“changeme”)</span></p>
<p class="p1"><span class="s1">app = FastAPI(title=“Supersonic Cloud Assist”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">class Ask(BaseModel):</span></p>
<p class="p1"><span class="s1">question: str</span></p>
<p class="p1"><span class="s1">boost: str | None = None</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">def auth(x_api_key: str | None):</span></p>
<p class="p1"><span class="s1">if x_api_key != API_KEY:</span></p>
<p class="p1"><span class="s1">raise HTTPException(status_code=401, detail=“bad key”)</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">@app.post(”/ask”)</span></p>
<p class="p1"><span class="s1">def ask(inp: Ask, x_api_key: str | None = Header(default=None)):</span></p>
<p class="p1"><span class="s1">auth(x_api_key)</span></p>
<p class="p1"><span class="s1">return {“answer”: f”(cloud stub) {inp.question}”, “boost”: inp.boost or “none”}</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">RUN_CLOUD = “””</span></p>
<p class="p1"><span class="s1">#!/usr/bin/env python3</span></p>
<p class="p1"><span class="s1">import os, subprocess</span></p>
<p class="p1"><span class="s1">port = os.environ.get(“CLOUD_PORT”,“8008”)</span></p>
<p class="p1"><span class="s1">subprocess.run([“uvicorn”,“cloud.fastapi_stub.main:app”,”–host”,“127.0.0.1”,”–port”,port], check=False)</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">—————————– tauri wrapper —————————</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">CARGO_TOML = “””</span></p>
<p class="p1"><span class="s1">[package]</span></p>
<p class="p1"><span class="s1">name = “supersonic-desktop”</span></p>
<p class="p1"><span class="s1">version = “0.1.0”</span></p>
<p class="p1"><span class="s1">edition = “2021”</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">[dependencies]</span></p>
<p class="p1"><span class="s1">tauri = { version = “1.6”, features = [“shell-open”] }</span></p>
<p class="p1"><span class="s1">serde = { version = “1”, features = [“derive”] }</span></p>
<p class="p1"><span class="s1">serde_json = “1”</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">[build-dependencies]</span></p>
<p class="p1"><span class="s1">tauri-build = { version = “1” }</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">TAURI_CONF = “””</span></p>
<p class="p1"><span class="s1">{</span></p>
<p class="p1"><span class="s1">“package”: { “productName”: “Supersonic”, “version”: “0.1.0” },</span></p>
<p class="p1"><span class="s1">“tauri”: {</span></p>
<p class="p1"><span class="s1">“allowlist”: { “shell”: { “all”: true }, “open”: true },</span></p>
<p class="p1"><span class="s1">“windows”: [</span></p>
<p class="p1"><span class="s1">{ “title”: “Supersonic”, “width”: 1200, “height”: 800, “resizable”: true, “fullscreen”: false, “url”: “http://127.0.0.1:7860” }</span></p>
<p class="p1"><span class="s1">],</span></p>
<p class="p1"><span class="s1">“bundle”: { “active”: true, “identifier”: “com.yourname.supersonic”, “targets”: “all” }</span></p>
<p class="p1"><span class="s1">},</span></p>
<p class="p1"><span class="s1">“build”: {</span></p>
<p class="p1"><span class="s1">“beforeBuildCommand”: “”,</span></p>
<p class="p1"><span class="s1">“beforeDevCommand”: “”,</span></p>
<p class="p1"><span class="s1">“devPath”: “http://127.0.0.1:7860”,</span></p>
<p class="p1"><span class="s1">“distDir”: “http://127.0.0.1:7860”</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">MAIN_RS = r”””</span></p>
<p class="p1"><span class="s1">#![cfg_attr(not(debug_assertions), windows_subsystem = “windows”)]</span></p>
<p class="p1"><span class="s1">use std::process::{Command, Stdio};</span></p>
<p class="p1"><span class="s1">use std::{thread, time::Duration};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">fn launch_python() -&gt; Result&lt;(), String&gt; {</span></p>
<p class="p1"><span class="s1">let _ = Command::new(“python”)</span></p>
<p class="p1"><span class="s1">.args([“scripts/run_offline_llm.py”])</span></p>
<p class="p1"><span class="s1">.stdout(Stdio::null())</span></p>
<p class="p1"><span class="s1">.stderr(Stdio::null())</span></p>
<p class="p1"><span class="s1">.spawn()</span></p>
<p class="p1"><span class="s1">.map_err(|e| format!(“failed to start python: {e}”))?;</span></p>
<p class="p1"><span class="s1">thread::sleep(Duration::from_millis(1200));</span></p>
<p class="p1"><span class="s1">Ok(())</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">fn main() {</span></p>
<p class="p1"><span class="s1">let _ = launch_python();</span></p>
<p class="p1"><span class="s1">tauri::Builder::default()</span></p>
<p class="p1"><span class="s1">.run(tauri::generate_context!())</span></p>
<p class="p1"><span class="s1">.expect(“error while running Supersonic”);</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">—————————– desktop/webui shim –––––––––––</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">AGENT_LOADER = “””\</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p3"><span class="s2"><h1><span class="s1">desktop/webui/agent_loader.py</span></h1></span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import importlib</span></p>
<p class="p1"><span class="s1">def load_agent():</span></p>
<p class="p1"><span class="s1">try:</span></p>
<p class="p1"><span class="s1">mod = importlib.import_module(“agent.main_llm”)</span></p>
<p class="p1"><span class="s1">return mod.Agent()</span></p>
<p class="p1"><span class="s1">except Exception:</span></p>
<p class="p1"><span class="s1">mod = importlib.import_module(“agent.main”)</span></p>
<p class="p1"><span class="s1">return mod.Agent()</span></p>
<p class="p1"><span class="s1">“””</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">WEB_REQ = “flask==3.0.3\npython-dotenv==1.0.1\n”</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">WEB_APP = “””</span></p>
<p class="p1"><span class="s1">import os</span></p>
<p class="p1"><span class="s1">from pathlib import Path</span></p>
<p class="p1"><span class="s1">from flask import Flask, request, render_template_string, jsonify</span></p>
<p class="p1"><span class="s1">from dotenv import load_dotenv</span></p>
<p class="p1"><span class="s1">load_dotenv()</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">import sys</span></p>
<p class="p1"><span class="s1">sys.path.append(os.path.abspath(os.path.join(os.path.dirname(</span><span class="s3">file</span><span class="s1">), “..”, “..”)))</span></p>
<p class="p1"><span class="s1">from desktop.webui.agent_loader import load_agent</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">PORT = int(os.getenv(“PORT”, “7860”))</span></p>
<p class="p1"><span class="s1">agent = load_agent()</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">TPL = ‘’’</span></p>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
</body>
</html>
