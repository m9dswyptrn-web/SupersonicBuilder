# ... keep existing imports/classes (RAG, SkillPack) above ...

from agent.llm_backend import LLM  # NEW

SYS_PROMPT = (
    "You are Supersonic Tech Agent. Be concise, cite file paths from context when relevant. "
    "If a wiring or DSP task is requested, outline exact steps and common pitfalls."
)

class Agent:
    def __init__(self):
        self.rag = RAG(EMBED_MODEL)
        self.skills = SkillPack(SKILLS_DIR)
        self.llm = None
        try:
            self.llm = LLM()  # will lazily load on first call
        except Exception as e:
            # keep running even without model file; weâ€™ll just return stub
            print(f"[agent] LLM not ready yet: {e}")

    def ingest_dir(self, root: Path):
        for p in root.rglob("*.md"):
            text = p.read_text("utf-8", errors="ignore")
            self.rag.add_doc(str(p), text, {"path": str(p)})
        return "ingested"

    def query(self,